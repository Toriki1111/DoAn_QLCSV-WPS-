<Window x:Class="DoAn_QLCSV.Student_SignUp"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Đăng ký của tôi"
        Height="520" Width="900"
        WindowStartupLocation="CenterOwner" ResizeMode="CanResize"
        Background="#121212">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="8"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Đăng ký của tôi" FontSize="22" FontWeight="Bold"
                   Foreground="#E6E6E6"/>

        <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
            <TextBox x:Name="txtSearch" Width="380" Height="32" VerticalContentAlignment="Center"
                     Background="#2A2A2A" Foreground="#E6E6E6" BorderBrush="#3C3C3C" Padding="8"
                     TextChanged="txtSearch_TextChanged" />
            <Button Content="🔄 Làm mới" Margin="8,0,0,0" Padding="10,6" Click="btnRefresh_Click"
                    Background="#1976D2" Foreground="#FFFFFF" BorderThickness="0"/>
            <TextBlock x:Name="txtCount" Margin="16,0,0,0" VerticalAlignment="Center" Foreground="#AFAFAF"/>
        </StackPanel>

        <Border Grid.Row="4" Background="#1E1E1E" CornerRadius="6" BorderBrush="#2E2E2E" BorderThickness="1" Padding="8">
            <Grid>
                <DataGrid x:Name="dgRegistrations"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          IsReadOnly="True"
                          RowHeight="48"
                          SelectionMode="Single"
                          Background="#1E1E1E"
                          RowBackground="#2A2A2A"
                          AlternatingRowBackground="#151515"
                          GridLinesVisibility="Horizontal"
                          Foreground="#E6E6E6">
                    <DataGrid.ColumnHeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="Background" Value="#252525"/>
                            <Setter Property="Foreground" Value="#FFD166"/>
                            <Setter Property="Padding" Value="8"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                            <Setter Property="BorderBrush" Value="#2E2E2E"/>
                        </Style>
                    </DataGrid.ColumnHeaderStyle>

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Sự kiện" Binding="{Binding Name}" Width="2*"/>
                        <DataGridTextColumn Header="Ngày giờ" Binding="{Binding StartDateFormatted}" Width="170"/>
                        <DataGridTextColumn Header="Địa điểm" Binding="{Binding Location}" Width="1.5*"/>
                        <DataGridTextColumn Header="Trạng thái" Binding="{Binding Status}" Width="120"/>
                        <DataGridTemplateColumn Header="Hành động" Width="140">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Button Content="✖ Hủy" Padding="8,4" Margin="4,0,0,0"
                                                Click="btnCancel_Click"
                                                Tag="{Binding}"
                                                IsEnabled="{Binding CanCancel}"
                                                Background="#D32F2F" Foreground="#FFFFFF" BorderThickness="0"/>
                                        <Button Content="ℹ️" Padding="8,4" Margin="4,0,0,0"
                                                Click="btnView_Click"
                                                Tag="{Binding}"
                                                Background="#1976D2" Foreground="#FFFFFF" BorderThickness="0"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel x:Name="EmptyState" Visibility="Collapsed" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="📭" FontSize="48" Foreground="#666" HorizontalAlignment="Center"/>
                    <TextBlock Text="Bạn chưa đăng ký sự kiện nào" FontSize="14" Foreground="#AFAFAF" HorizontalAlignment="Center" Margin="0,8,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="Đóng" Width="100" Click="btnClose_Click" Background="#1976D2" Foreground="#FFFFFF" BorderThickness="0"/>
        </StackPanel>
    </Grid>
</Window>